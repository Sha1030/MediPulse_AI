{"ast":null,"code":"import _objectSpread from\"A:/Hackathon/ByteQuest/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import axios from'axios';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){const{user}=useAuth();const[isEditing,setIsEditing]=useState(false);const[formData,setFormData]=useState({name:(user===null||user===void 0?void 0:user.name)||'',email:(user===null||user===void 0?void 0:user.email)||'',phone:(user===null||user===void 0?void 0:user.phone)||''});const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();try{await axios.put('/api/auth/me',{name:formData.name,phone:formData.phone});// Refresh user data\nconst response=await axios.get('/api/auth/me');// Note: In a real app, you'd update the context, but for now we'll reload\nwindow.location.reload();setIsEditing(false);alert('Profile updated successfully!');}catch(error){var _error$response;console.error('Error updating profile:',error);if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){alert('Your session has expired. Please log in again.');// Could redirect to login here\n}else{var _error$response2,_error$response2$data;alert(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Failed to update profile');}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Profile\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsEditing(!isEditing),className:\"edit-btn\",children:isEditing?'Cancel':'Edit Profile'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-content\",children:isEditing?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"profile-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",value:formData.name,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,disabled:true,className:\"disabled-input\",title:\"Email cannot be changed\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",id:\"phone\",name:\"phone\",value:formData.phone,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"department\",children:\"Department\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"department\",name:\"department\",value:formData.department,disabled:true,className:\"disabled-input\",title:\"Department can only be changed by administrators\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:(user===null||user===void 0?void 0:user.role)||'',disabled:true,className:\"disabled-input\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"save-btn\",children:\"Save Changes\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Full Name:\"}),/*#__PURE__*/_jsx(\"span\",{children:user===null||user===void 0?void 0:user.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"span\",{children:user===null||user===void 0?void 0:user.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Phone:\"}),/*#__PURE__*/_jsx(\"span\",{children:(user===null||user===void 0?void 0:user.phone)||'Not provided'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Department:\"}),/*#__PURE__*/_jsx(\"span\",{children:(user===null||user===void 0?void 0:user.department)||'Not assigned'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Role:\"}),/*#__PURE__*/_jsx(\"span\",{children:user===null||user===void 0?void 0:user.role})]})]})})]});}export default Profile;","map":{"version":3,"names":["React","useState","axios","useAuth","jsx","_jsx","jsxs","_jsxs","Profile","user","isEditing","setIsEditing","formData","setFormData","name","email","phone","handleInputChange","e","value","target","prev","_objectSpread","handleSubmit","preventDefault","put","response","get","window","location","reload","alert","error","_error$response","console","status","_error$response2","_error$response2$data","data","className","children","onClick","onSubmit","htmlFor","type","id","onChange","required","disabled","title","department","role"],"sources":["A:/Hackathon/ByteQuest/frontend/src/components/Profile.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nfunction Profile() {\r\n  const { user } = useAuth();\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    name: user?.name || '',\r\n    email: user?.email || '',\r\n    phone: user?.phone || ''\r\n  });\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await axios.put('/api/auth/me', {\r\n        name: formData.name,\r\n        phone: formData.phone\r\n      });\r\n\r\n      // Refresh user data\r\n      const response = await axios.get('/api/auth/me');\r\n      // Note: In a real app, you'd update the context, but for now we'll reload\r\n      window.location.reload();\r\n      \r\n      setIsEditing(false);\r\n      alert('Profile updated successfully!');\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error);\r\n      if (error.response?.status === 401) {\r\n        alert('Your session has expired. Please log in again.');\r\n        // Could redirect to login here\r\n      } else {\r\n        alert(error.response?.data?.error || 'Failed to update profile');\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"profile-container\">\r\n      <div className=\"profile-header\">\r\n        <h2>My Profile</h2>\r\n        <button\r\n          onClick={() => setIsEditing(!isEditing)}\r\n          className=\"edit-btn\"\r\n        >\r\n          {isEditing ? 'Cancel' : 'Edit Profile'}\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"profile-content\">\r\n        {isEditing ? (\r\n          <form onSubmit={handleSubmit} className=\"profile-form\">\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"name\">Full Name</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"name\"\r\n                name=\"name\"\r\n                value={formData.name}\r\n                onChange={handleInputChange}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"email\">Email</label>\r\n              <input\r\n                type=\"email\"\r\n                id=\"email\"\r\n                name=\"email\"\r\n                value={formData.email}\r\n                disabled\r\n                className=\"disabled-input\"\r\n                title=\"Email cannot be changed\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"phone\">Phone</label>\r\n              <input\r\n                type=\"tel\"\r\n                id=\"phone\"\r\n                name=\"phone\"\r\n                value={formData.phone}\r\n                onChange={handleInputChange}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"department\">Department</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"department\"\r\n                name=\"department\"\r\n                value={formData.department}\r\n                disabled\r\n                className=\"disabled-input\"\r\n                title=\"Department can only be changed by administrators\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label>Role</label>\r\n              <input\r\n                type=\"text\"\r\n                value={user?.role || ''}\r\n                disabled\r\n                className=\"disabled-input\"\r\n              />\r\n            </div>\r\n\r\n            <button type=\"submit\" className=\"save-btn\">Save Changes</button>\r\n          </form>\r\n        ) : (\r\n          <div className=\"profile-info\">\r\n            <div className=\"info-item\">\r\n              <label>Full Name:</label>\r\n              <span>{user?.name}</span>\r\n            </div>\r\n\r\n            <div className=\"info-item\">\r\n              <label>Email:</label>\r\n              <span>{user?.email}</span>\r\n            </div>\r\n\r\n            <div className=\"info-item\">\r\n              <label>Phone:</label>\r\n              <span>{user?.phone || 'Not provided'}</span>\r\n            </div>\r\n\r\n            <div className=\"info-item\">\r\n              <label>Department:</label>\r\n              <span>{user?.department || 'Not assigned'}</span>\r\n            </div>\r\n\r\n            <div className=\"info-item\">\r\n              <label>Role:</label>\r\n              <span>{user?.role}</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}